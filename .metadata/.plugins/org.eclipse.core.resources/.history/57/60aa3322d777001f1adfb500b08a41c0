<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@include file="../1.main/admin_header.jsp"%>
<!DOCTYPE html>
<html>
<head>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
	crossorigin="anonymous">
<meta charset="UTF-8">
<title>관리자 급여설정 페이지입니다</title>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>

</head>
<body>
	<h2>관리자 급여설정 페이지입니다</h2>
	<div class="row g-3">
		<div class="col">
			<table>
				<tr>
					<th>번호</th>
					<th>사원번호</th>
					<th>사원명</th>
					<th>부서</th>
					<th>직급</th>
				</tr>
				<c:set var="num" value="1"></c:set>
				<c:forEach var="emp" items="${listEmp }">
					<tr onclick="salDList(${emp.empno})" id="salDList" style="cursor: hand">
						<td>${num }</td>
						<td>${emp.empno }</td>
						<td>${emp.name}</td>
						<td>${emp.deptName }</td>
						<td>${emp.grade }</td>
					</tr>
					<c:set var="num" value="${num + 1 }"></c:set>
				</c:forEach>
			</table>
			<table>
				<c:if test="${page.startPage > page.pageBlock }">
					<a
						href="admin_sal_set?currentPage=${page.startPage-page.pageBlock}">[이전]</a>
				</c:if>
				<c:forEach var="i" begin="${page.startPage}" end="${page.endPage}">
					<a href="admin_sal_set?currentPage=${i}">[${i}]</a>
				</c:forEach>
				<c:if test="${page.endPage < page.totalPage }">
					<a
						href="admin_sal_set?currentPage=${page.startPage+page.pageBlock}">[다음]</a>
				</c:if>

			</table>

		</div>
		<div class="row col g-3">
			<table>

				<tr>
					<th>1.기초정보</th>
				</tr>
<tr>
					<th>이 름 : <input type="text" id="iname"  readonly="readonly"><p> 
					입사일자 :  <input type="text" id="idate"  readonly="readonly"><p>
					부 서 명 :  <input type="text" id="idname"  readonly="readonly"><p> 
					직급 :  <input type="text" id="igraed"  readonly="readonly"><p>
					</th>
				
				</tr>

				<tr>
					<th>2. 급여정보</th>
				</tr>
				<tr>
					<th>
						<form class="row g-3">
						<p>
					기본급 : <input type="text" id="isalBase"  readonly="readonly"><p> 
					식대 :  <input type="text" id="isalFood"  readonly="readonly"><p>
					상여 :  <input type="text" id="isalBonus"  readonly="readonly"><p> 
					추가수당 :  <input type="text" id="isalNight"  readonly="readonly"><p>
						</form>
				<tr>
					<th>3. 계좌정보</th>
				</tr>
				<tr>
					<th>
						<div class="col-auto">
							<label class="visually-hidden" for="autoSizingSelect">Preference</label>
							<select class="form-select" id="autoSizingSelect">
								<option selected>Choose...</option>
								<option value="1">One</option>
								<option value="2">Two</option>
								<option value="3">Three</option>
							</select>
						</div>
						<div class="row mb-7">
							<label for="inputPassword3" class="col-sm-2 col-form-label ">계좌번호
								: </label>
							<div class="col-sm-3">
								<input type="text" id="iaccount"  readonly="readonly">
							</div>
						</div>
    
			</table>
		</div>
	</div>

	<input type="button" value="저장">
	<input type="submit" value="수정">
	
	<script type="text/javascript">
	        function salDList(empno) {
	            $.ajax({
	                url: "/mh/getDeptName?empno=" + empno, 
	                type: "GET",         
					dataType:'json',
	                success: function(response) {
	                    $('#iname').val(response.response.name);
	                    $('#idate').val(response.response.hiredate);
	                    $('#idname').val(response.response.deptName);
	                    $('#igraed').val(response.response.grade);
	                    $('#isalBase').val(response.response.salBase);
	                    $('#isalFood').val(response.response.salFood);
	                    $('#isalBonus').val(response.response.salBonus);
	                    $('#isalNight').val(response.response.salNight);
	                    $('#iaccount').val(response.response.account);

	                },
	                error: function(xhr, status, error) {
	                    console.error("AJAX 요청 중 오류 발생: ", status, error);
	                    console.log("응답 내용: ", xhr.responseText); 
	                }
	            });
	        }
	</script>
	
	
	
</body>
</html>