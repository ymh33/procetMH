<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@include file="../1.main/admin_header.jsp"%>
<!DOCTYPE html>
<html>
<head>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
	crossorigin="anonymous">
<meta charset="UTF-8">
<title>관리자 급여설정 페이지입니다</title>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>

</head>
<body>
	<h2>관리자 급여설정 페이지입니다</h2>
	<div class="row g-3">
		<div class="col">
			<table>
				<tr>
					<th>번호</th>
					<th>사원번호</th>
					<th>사원명</th>
					<th>부서</th>
					<th>직급</th>
				</tr>
				<c:set var="num" value="1"></c:set>
				<c:forEach var="emp" items="${listEmp }">

					<tr onclick="salDList(${emp.empno})" id="salDList" style="cursor: hand">
						<td>${num }</td>
						<td>${emp.empno }"</td>
						<td>${emp.name}</td>
						<td>${emp.deptName }</td>
						<td>${emp.grade }</td>
					</tr>
					<c:set var="num" value="${num + 1 }"></c:set>
				</c:forEach>
			</table>
			<table>
				<c:if test="${page.startPage > page.pageBlock }">
					<a
						href="admin_sal_set?currentPage=${page.startPage-page.pageBlock}">[이전]</a>
				</c:if>
				<c:forEach var="i" begin="${page.startPage}" end="${page.endPage}">
					<a href="admin_sal_set?currentPage=${i}">[${i}]</a>
				</c:forEach>
				<c:if test="${page.endPage < page.totalPage }">
					<a
						href="admin_sal_set?currentPage=${page.startPage+page.pageBlock}">[다음]</a>
				</c:if>

			</table>

		</div>
		<div class="row col g-3">
			<table>

				<tr>
					<th>1.기초정보</th>
				</tr>
<tr>
					<th>이 름 :  <input type="text" id="iname"  readonly="readonly"><p> 
					입사일자 :  <input type="text" id="idate"  readonly="readonly"><p>
					부 서 명 :  <input type="text" id="idname"  readonly="readonly"><p> 
					직책 :  <input type="text" id="igraed"  readonly="readonly"><p>
					<input type="text" id ="deptNameDiv" >
					</th>
					
				
				</tr>

				<tr>
					<th>2. 급여정보</th>
				</tr>
				<tr>
					<th>
					<c:forEach var="sal" items="${salDList }">
						<form class="row g-3">
							<div class="col-md-3">
								<label for="inputEmail4" class="form-label">기본급</label> <input
									type="text" class="form-control" id="salBase"  readonly="readonly">
							</div>
							<div class="col-md-3">
								<label for="inputPassword4" class="form-label">식대</label> <input
									type="text" class="form-control" id="salFood"  readonly="readonly">
							</div>
						</form>

						<form class="row g-3">
							<div class="col-md-3">
								<label for="inputEmail4" class="form-label">상여</label> <input
									type="text" class="form-control" id="salBonus"  readonly="readonly">
							</div>
							<div class="col-md-3">
								<label for="inputPassword4" class="form-label">야간수당</label> <input
									type="text" class="form-control"  id="salNight"  readonly="readonly">
							</div>
						</form>
						</c:forEach>
				<tr>
					<th>3. 계좌정보</th>
				</tr>
				<tr>
					<th>
						<div class="col-auto">
							<label class="visually-hidden" for="autoSizingSelect">Preference</label>
							<select class="form-select" id="autoSizingSelect">
								<option selected>Choose...</option>
								<option value="1">One</option>
								<option value="2">Two</option>
								<option value="3">Three</option>
							</select>
						</div>
						<div class="row mb-7">
							<label for="inputPassword3" class="col-sm-2 col-form-label ">계좌번호
								: </label>
							<div class="col-sm-3">
								<input type="text" class="form-control" id="sal5">
							</div>
						</div>
    
			</table>
		</div>
	</div>
	
		<c:forEach var="entry" items="${response}" varStatus="status">
		${entry.key[i].col1 } <p>
		${entry.value} <p>
		
	</c:forEach>
	<input type="button" value="저장">
	<input type="submit" value="수정">
	
	<script type="text/javascript">
	        function salDList(empno) {
	        	alert("salDList start");
	        	alert(empno);

	            $.ajax({
	                url: "/mh/getDeptName?empno=" + empno", 
	                type: "GET",         
	                data: { empno: empno },  
					dataType:'json',
	                success: function(response) {

	        	        alert("getDeptName response.status->"+response.status);
	        	        alert("getDeptName response->"+response);
	                    $('#deptNameDiv').html(response);

	                    var iname = response.name;
	                    var idate = response.hiredate;
	                    var idname = response.deptName;
	                    var igraed = response.grade;
	
	                },
	                error: function(xhr, status, error) {
	                    console.error("AJAX 요청 중 오류 발생: ", status, error);
	                    console.log("응답 내용: ", xhr.responseText); 
	                }
	            });
	        }
	</script>
	
	
	
</body>
</html>